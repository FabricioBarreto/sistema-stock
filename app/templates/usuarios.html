{% extends 'adminlte.html' %}

{% block title %}ðŸ‘¥ Lista de Usuarios{% endblock %}

{% block content %}
<div class="content-header">
  <div class="container-fluid">
    <h2 class="mb-4"><i class="fas fa-users"></i> Usuarios Registrados</h2>
  </div>
</div>

<section class="content">
  <div class="container-fluid">
    <div class="card shadow-sm">
      <div class="card-body table-responsive">
        <table class="table table-striped table-bordered align-middle">
          <thead class="thead-light text-center">
            <tr>
              <th>ID</th>
              <th>Nombre</th>
              <th>CÃ©dula</th>
              <th>Correo</th>
              <th>Rol</th>
              <th>Estado</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            {% for u in usuarios %}
            <tr>
              <td class="text-center">{{ u.id }}</td>
              <td>{{ u.nombre }}</td>
              <td>{{ u.cedula }}</td>
              <td>{{ u.correo }}</td>
              <td class="text-center">{{ u.rol|capitalize }}</td>
              <td class="text-center">
                {% if u.estado == 'activo' %}
                  <span class="badge bg-success">Activo</span>
                {% else %}
                  <span class="badge bg-secondary">Inactivo</span>
                {% endif %}
              </td>
              <td class="text-center">
                {% if u.id != usuario.id %}
                  <form method="POST" action="{{ url_for('main.cambiar_estado_usuario', id=u.id) }}" class="d-inline">
                    {% if u.estado == 'activo' %}
                      <button type="submit" class="btn btn-sm btn-warning" onclick="return confirm('Â¿Desactivar a {{ u.nombre }}?');">
                        ðŸ›‘
                      </button>
                    {% else %}
                      <button type="submit" class="btn btn-sm btn-success" onclick="return confirm('Â¿Activar a {{ u.nombre }}?');">
                        âœ…
                      </button>
                    {% endif %}
                  </form>
                {% else %}
                  <span class="text-muted">SesiÃ³n actual</span>
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <div class="mt-3">
      <a href="{{ url_for('main.dashboard') }}" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Volver al panel
      </a>
    </div>
  </div>
</section>
{% endblock %}


